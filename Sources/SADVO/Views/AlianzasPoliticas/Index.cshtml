@model SADVO.Core.Application.ViewModels.Alianzas.AlianzasViewModel
@using SADVO.Core.Domain.Entities
@{
    ViewData["Title"] = "Alianzas Políticas";
    Layout = "_LayoutDirigente";
}

<div class="min-h-screen bg-white py-8 px-4 max-w-7xl mx-auto">
    <h1 class="text-2xl font-bold mb-2">Alianzas Políticas</h1>
    <p class="text-gray-600 mb-6">Gestiona las alianzas de tu partido político</p>

    @if (TempData["Success"] != null)
    {
        <div class="bg-green-100 border border-green-400 text-green-700 p-4 rounded mb-4">
            @TempData["Success"]
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="bg-red-100 border border-red-400 text-red-700 p-4 rounded mb-4">
            @TempData["Error"]
        </div>
    }

    <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
        <!-- Alianzas Activas -->
        <div class="border rounded p-4 bg-gray-50">
            <h2 class="font-semibold text-lg mb-2">Alianzas Activas</h2>
            <p class="text-sm text-gray-500 mb-4">@Model.AlianzasActivas.Count alianza(s)</p>

            @if (Model.AlianzasActivas.Any())
            {
                @foreach (var alianza in Model.AlianzasActivas)
                {
                    <div class="border rounded p-3 mb-3 bg-white">
                        <p class="font-medium">
                            @(alianza.PartidoSolicitanteId != alianza.PartidoDestinoId
                                ? alianza.NombrePartidoConSiglas(false)
                                : alianza.NombrePartidoConSiglas(true))
                        </p>
                        <p class="text-sm text-gray-500">Activa desde: @(alianza.FechaRespuesta?.ToString("dd/MM/yyyy") ?? "N/A")</p>

                        <a asp-action="ConfirmarRomper" asp-route-id="@alianza.Id"
                           class="inline-block mt-2 bg-red-600 text-white px-3 py-1 rounded">
                            Romper Alianza
                        </a>
                    </div>
                }
            }
            else
            {
                <p class="text-sm text-gray-500">No tienes alianzas activas</p>
            }
        </div>

        <!-- Aquí tus otras secciones: Solicitudes Pendientes, Enviadas, etc. -->
    </div>
</div>
